from environs import Env
import googlemaps
import requests
from bs4 import BeautifulSoup
# import time
from fake_headers import Headers
import json
import pprint
# # ____ Local Imports _____
# from Mediavest_Scraper_bot.config import cred

# test selenium
import js2xml

# test selenium
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait 
from selenium.webdriver.support.expected_conditions import presence_of_element_located
from selenium.common.exceptions import NoSuchElementException

# ___ local imports __________
import sys
import os
SCRIPT_DIR  = os.path.dirname(os.path.abspath(__file__))
sys.path.append(os.path.dirname(SCRIPT_DIR))
from config import cred #NB: MIGHT BE WRONG




# url = 'https://www.google.com/maps/place/Felleskatalogen+AS/@59.9287146,10.7077331,17z/data=!3m1!4b1!4m5!3m4!1s0x46416dc536d1cbd9:0xf58778d2e5fc5517!8m2!3d59.9287146!4d10.7099271'
def get_hdr():
	hdr = Headers().generate()
	return hdr



def pullRequest(url, source):
	'''
	1. makes a pull request from gulesider.no.
	2. then checks the connection.
	3. then returns a soup.
	'''
	# print(url)
	try:
		r = requests.get(url, timeout=10)
		soup = BeautifulSoup(r.content, "html.parser")
		r.raise_for_status()

	except (requests.exceptions.RequestException, ValueError) as e:
		''' 
		if exception occurred:
			- prints error & related url
			- sends the faulty url (++) to errorSave() from error_save.py for later use
			- returns an empty soup
		'''	
		print("="*91)
		print("|											  |")
		print("|				WARNING: ERROR CAUGHT! 				  |")
		print("|											  |")
		print("="*91)
		print(f'					{print(e)}')
		# errorSave(url, e, source) #Currently not in nuse (not yet finished)
		# soup = ""
		pass 
	return soup


def scraper():	
	source = 'homemade_scraper'
	url = 'https://maps.google.com/?cid=17692242508345267479'
	# url = 'https://www.google.com/maps/place/Felleskatalogen+AS/@59.9287146,10.7099271,17z/data=!3m1!4b1!4m5!3m4!1s0x0:0xf58778d2e5fc5517!8m2!3d59.9287146!4d10.7099271'
	soup = pullRequest(url, source)
	# url = 'https://www.google.com/maps/place/Felleskatalogen+AS/@59.9287146,10.7077331,17z/data=!3m1!4b1!4m5!3m4!1s0x46416dc536d1cbd9:0xf58778d2e5fc5517!8m2!3d59.9287146!4d10.7099271'
	# claim = soup.find('div',{'class':'m6QErb'})
	# claim = soup.find('div',{'class':'RcCsl fVHpi w4vB1d NOE9ve M0S7ae AG25L'})
	# section = soup.find('div', {'id':'QA0Szd'})
	# class="RcCsl fVHpi w4vB1d NOE9ve M0S7ae AG25L"
	# print(soup.prettify())
	soup = soup.findAll('script')
	# soup = soup.find('div', {'class':"m6QErb"})#{'jstcache':"702"})
	# print(soup)
	# script = soup[6].text
	parsed = [js2xml.parse(i.text) for i in soup]
	#, nonce='uCe9l_xXz2gIW_I-7hjKOA').text)
	# soup = soup.find('script',{'nonce':"9iSjbrlZC-BfmiRUgB4I_Q" })
	# script = json.loads(soup[6].text)
	


	for i in parsed:
		print(i.xpath('//property[@id="QA0Szd"]'))


	# pprint.pprint(parsed)
	# print(len(soup))
	# for i in soup:
	# 	print(i.prettify())
	# print(section.prettify())

scraper()
# full_xpath
# /html/body/div[3]/div[9]/div[9]/div/div/div[1]/div[2]/div/div[1]/div/div/div[7]/div[9]
# <div jstcache="702" class="m6QErb" jsan="t-dgE5uNmzjiE,7.m6QErb,0.aria-label,0.role" data-js-log-root="" aria-label="Information for Felleskatalogen AS" role="region"><div jstcache="695" ve-visible="cf" jslog="39448" data-js-log-root=""></div><div jstcache="695" ve-visible="cf" jslog="39497" data-js-log-root=""></div><div jstcache="696" class="RcCsl fVHpi w4vB1d NOE9ve M0S7ae AG25L" jsan="t-dsyYLk_X_CA,7.RcCsl,7.fVHpi,7.w4vB1d,7.NOE9ve,7.M0S7ae,7.AG25L" data-js-log-root=""><button jsaction="pane.wfvdle6;clickmod:pane.wfvdle6;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="144" aria-label="Address: Essendrops gate 3, 0368 Oslo " data-item-id="address" data-tooltip="Copy address" jslog="36622;track:click;mutable:true" class="CsEnBe" jsan="0.jsaction,t-N9b393LKKI4,7.CsEnBe,0.aria-label,0.data-item-id,0.data-tooltip,0.jslog,t--fmfwOkA_6s"><div jstcache="146" class="AeaXub"> <div jstcache="135" class="cXHGnc" jsan="7.cXHGnc,t-DLjTl110KM4"> <div jstcache="142" class="Eottgc" jsan="7.Eottgc"> <img alt="" jstcache="143" src="//www.gstatic.com/images/icons/material/system_gm/2x/place_gm_blue_24dp.png" class="Liguzb" jsan="7.Liguzb,0.alt,8.src"> </div> </div> <div jstcache="136" class="rogA2c" jsan="7.rogA2c"> <div jstcache="137" class="Io6YTe fontBodyMedium" jsan="7.Io6YTe,7.fontBodyMedium">Essendrops gate 3, 0368 Oslo</div> <div jstcache="138" style="display:none"></div> <div jstcache="139" style="display:none"></div> <div jstcache="140" class="gSkmPd fontBodySmall CuiGbf" jsan="7.gSkmPd,7.fontBodySmall,7.CuiGbf"> </div> </div> </div><div jstcache="147" style="display:none"></div></button><a jstcache="144" aria-haspopup="true" class="CsEnBe" style="display:none" jsan="t-N9b393LKKI4,7.CsEnBe,0.aria-haspopup"></a><div jstcache="131" style="display:none"></div><div jstcache="132" class="UCw5gc" jsan="t-m1j8Y6BxAJ8,7.UCw5gc"> <div jstcache="149" class="C9yzub"><div jstcache="706" class="etWJQ kdfrQc" jsan="t-WC_3NrOh6j8,7.etWJQ,7.kdfrQc" data-js-log-root=""><button jsaction="pane.wfvdle7;keydown:pane.wfvdle7;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="120" aria-label="Copy address" data-tooltip="Copy address" data-value="Copy address" class="S9kvJb" jsan="0.jsaction,t-diObG01SZ98,7.S9kvJb,0.aria-label,0.data-tooltip,0.data-value,t-AbjrQ4n89-4"><span jstcache="122" class="DVeyrd LCTIRd" jsan="7.DVeyrd,7.LCTIRd"><img alt="Copy address" draggable="false" jstcache="123" src="//www.gstatic.com/images/icons/material/system_gm/2x/content_copy_gm_grey_18dp.png" class="EgL07d" jsan="7.EgL07d,0.alt,8.src,0.draggable"><span jstcache="124" style="display:none"></span></span><div jstcache="125" style="display:none"></div><div jstcache="126" style="display:none"></div></button><a jstcache="120" role="tab" tabindex="-1" class="S9kvJb aUoQJc" style="display:none" jsan="t-diObG01SZ98,7.S9kvJb,7.aUoQJc,0.role,0.tabindex"></a></div></div> </div><div jstcache="133" style="display:none"></div></div><div jstcache="707" class="OqCZI fontBodyMedium WVXvdc" jsan="t-Y_gmqpSdiUU,7.OqCZI,7.fontBodyMedium,7.WVXvdc" data-js-log-root=""> <div aria-expanded="false" data-hide-tooltip-on-mouse-move="true" role="button" tabindex="0" ved="1i:1,t:14925,e:0,p:VD3HYsbmF72rxc8P65agsAo:9" jsaction="pane.openhours.112.dropdown;keydown:pane.openhours.112.dropdown;" jstcache="154" class="OMl5r hH0dDd jBYmhd" jsan="7.OMl5r,7.hH0dDd,7.jBYmhd,0.aria-expanded,0.data-hide-tooltip-on-mouse-move,0.role,0.tabindex,0.ved,0.jsaction"> <img aria-label="Hours" jstcache="155" src="//www.gstatic.com/images/icons/material/system_gm/2x/schedule_gm_blue_24dp.png" class="OdW2qd" jsan="7.OdW2qd,8.src,0.aria-label"> <span jstcache="156" style="display:none"></span> <div class="MkV9"> <div class="o0Svhf"> <span class="ZDu9vd"> <span jstcache="157"><span style="font-weight:400;color:rgba(217,48,37,1.00);">Closed</span><span style="font-weight:400;"> ⋅ Opens 8:30AM Fri</span></span> <span jstcache="158" style="display:none"></span> </span> <span jstcache="159" aria-label="Show open hours for the week" role="img" class="rh7Scc LaAyid M5ziBd" jsan="7.rh7Scc,t-E9nZ7dtto7Y,7.LaAyid,7.M5ziBd,0.aria-label,0.role"></span> </div> <div jstcache="160" style="display:none"></div> <div jstcache="161" style="display:none"></div> </div> </div> <div aria-label="Thursday, 8:30AM to 4PM; Friday, 8:30AM to 4PM; Saturday, Closed; Sunday, Closed; Monday, 8:30AM to 4PM; Tuesday, 8:30AM to 4PM; Wednesday, 8:30AM to 4PM. Hide open hours for the week" jstcache="162" class="t39EBf GUrTXd"> <div> <table class="eK4R0e fontBodyMedium"> <tbody><tr jstcache="185" jsinstance="0" class="y0skZc"> <td jstcache="186" class="ylH6lf fontTitleSmall" jsan="7.ylH6lf,7.fontTitleSmall"> <div jstcache="187">Thursday</div> <div jstcache="188" class="GfF3rf" style="display:none" jsan="7.GfF3rf"></div> </td> <td aria-label="8:30AM to 4PM" role="text" jstcache="189" class="mxowUb"> <ul jstcache="190" class="fontTitleSmall" jsan="7.fontTitleSmall"><li jstcache="191" jsinstance="*0" class="G8aQO" jsan="7.G8aQO">8:30AM–4PM</li></ul> <div jstcache="192" class="GfF3rf" style="display:none"> <span jstcache="193" class="rYsDIf" style="display:none">Holiday hours</span> <span jstcache="194" class="zdqHHd" style="display:none">Hours might differ</span> </div> </td> <td jstcache="195" class="HuudEc" jsan="7.HuudEc,t-e_-rMwTIYXc"> <button data-hide-tooltip-on-mouse-move="true" data-value="Thursday, 8:30AM–4PM" jsaction="pane.openhours.112.copy;;focus:pane.focusTooltip;blur:pane.blurTooltip" data-tooltip="Copy open hours" aria-label="Thursday, 8:30AM to 4PM, Copy open hours" jstcache="199" class="mWUh3d"> <div class="GYnni"></div> </button> </td> </tr><tr jstcache="185" jsinstance="1" class="y0skZc"> <td jstcache="186" class="ylH6lf" jsan="7.ylH6lf"> <div jstcache="187">Friday</div> <div jstcache="188" class="GfF3rf" style="display:none" jsan="7.GfF3rf"></div> </td> <td aria-label="8:30AM to 4PM" role="text" jstcache="189" class="mxowUb"> <ul jstcache="190"><li jstcache="191" jsinstance="*0" class="G8aQO" jsan="7.G8aQO">8:30AM–4PM</li></ul> <div jstcache="192" class="GfF3rf" style="display:none"> <span jstcache="193" class="rYsDIf" style="display:none">Holiday hours</span> <span jstcache="194" class="zdqHHd" style="display:none">Hours might differ</span> </div> </td> <td jstcache="195" class="HuudEc" jsan="7.HuudEc,t-e_-rMwTIYXc"> <button data-hide-tooltip-on-mouse-move="true" data-value="Friday, 8:30AM–4PM" jsaction="pane.openhours.112.copy;;focus:pane.focusTooltip;blur:pane.blurTooltip" data-tooltip="Copy open hours" aria-label="Friday, 8:30AM to 4PM, Copy open hours" jstcache="199" class="mWUh3d"> <div class="GYnni"></div> </button> </td> </tr><tr jstcache="185" jsinstance="2" class="y0skZc"> <td jstcache="186" class="ylH6lf" jsan="7.ylH6lf"> <div jstcache="187">Saturday</div> <div jstcache="188" class="GfF3rf" style="display:none" jsan="7.GfF3rf"></div> </td> <td aria-label="Closed" role="text" jstcache="189" class="mxowUb"> <ul jstcache="190"><li jstcache="191" jsinstance="*0" class="G8aQO" jsan="7.G8aQO">Closed</li></ul> <div jstcache="192" class="GfF3rf" style="display:none"> <span jstcache="193" class="rYsDIf" style="display:none">Holiday hours</span> <span jstcache="194" class="zdqHHd" style="display:none">Hours might differ</span> </div> </td> <td jstcache="195" class="HuudEc" jsan="7.HuudEc,t-e_-rMwTIYXc"> <button data-hide-tooltip-on-mouse-move="true" data-value="Saturday, Closed" jsaction="pane.openhours.112.copy;;focus:pane.focusTooltip;blur:pane.blurTooltip" data-tooltip="Copy open hours" aria-label="Saturday, Closed, Copy open hours" jstcache="199" class="mWUh3d"> <div class="GYnni"></div> </button> </td> </tr><tr jstcache="185" jsinstance="3" class="y0skZc"> <td jstcache="186" class="ylH6lf" jsan="7.ylH6lf"> <div jstcache="187">Sunday</div> <div jstcache="188" class="GfF3rf" style="display:none" jsan="7.GfF3rf"></div> </td> <td aria-label="Closed" role="text" jstcache="189" class="mxowUb"> <ul jstcache="190"><li jstcache="191" jsinstance="*0" class="G8aQO" jsan="7.G8aQO">Closed</li></ul> <div jstcache="192" class="GfF3rf" style="display:none"> <span jstcache="193" class="rYsDIf" style="display:none">Holiday hours</span> <span jstcache="194" class="zdqHHd" style="display:none">Hours might differ</span> </div> </td> <td jstcache="195" class="HuudEc" jsan="7.HuudEc,t-e_-rMwTIYXc"> <button data-hide-tooltip-on-mouse-move="true" data-value="Sunday, Closed" jsaction="pane.openhours.112.copy;;focus:pane.focusTooltip;blur:pane.blurTooltip" data-tooltip="Copy open hours" aria-label="Sunday, Closed, Copy open hours" jstcache="199" class="mWUh3d"> <div class="GYnni"></div> </button> </td> </tr><tr jstcache="185" jsinstance="4" class="y0skZc"> <td jstcache="186" class="ylH6lf" jsan="7.ylH6lf"> <div jstcache="187">Monday</div> <div jstcache="188" class="GfF3rf" style="display:none" jsan="7.GfF3rf"></div> </td> <td aria-label="8:30AM to 4PM" role="text" jstcache="189" class="mxowUb"> <ul jstcache="190"><li jstcache="191" jsinstance="*0" class="G8aQO" jsan="7.G8aQO">8:30AM–4PM</li></ul> <div jstcache="192" class="GfF3rf" style="display:none"> <span jstcache="193" class="rYsDIf" style="display:none">Holiday hours</span> <span jstcache="194" class="zdqHHd" style="display:none">Hours might differ</span> </div> </td> <td jstcache="195" class="HuudEc" jsan="7.HuudEc,t-e_-rMwTIYXc"> <button data-hide-tooltip-on-mouse-move="true" data-value="Monday, 8:30AM–4PM" jsaction="pane.openhours.112.copy;;focus:pane.focusTooltip;blur:pane.blurTooltip" data-tooltip="Copy open hours" aria-label="Monday, 8:30AM to 4PM, Copy open hours" jstcache="199" class="mWUh3d"> <div class="GYnni"></div> </button> </td> </tr><tr jstcache="185" jsinstance="5" class="y0skZc"> <td jstcache="186" class="ylH6lf" jsan="7.ylH6lf"> <div jstcache="187">Tuesday</div> <div jstcache="188" class="GfF3rf" style="display:none" jsan="7.GfF3rf"></div> </td> <td aria-label="8:30AM to 4PM" role="text" jstcache="189" class="mxowUb"> <ul jstcache="190"><li jstcache="191" jsinstance="*0" class="G8aQO" jsan="7.G8aQO">8:30AM–4PM</li></ul> <div jstcache="192" class="GfF3rf" style="display:none"> <span jstcache="193" class="rYsDIf" style="display:none">Holiday hours</span> <span jstcache="194" class="zdqHHd" style="display:none">Hours might differ</span> </div> </td> <td jstcache="195" class="HuudEc" jsan="7.HuudEc,t-e_-rMwTIYXc"> <button data-hide-tooltip-on-mouse-move="true" data-value="Tuesday, 8:30AM–4PM" jsaction="pane.openhours.112.copy;;focus:pane.focusTooltip;blur:pane.blurTooltip" data-tooltip="Copy open hours" aria-label="Tuesday, 8:30AM to 4PM, Copy open hours" jstcache="199" class="mWUh3d"> <div class="GYnni"></div> </button> </td> </tr><tr jstcache="185" jsinstance="*6" class="y0skZc"> <td jstcache="186" class="ylH6lf" jsan="7.ylH6lf"> <div jstcache="187">Wednesday</div> <div jstcache="188" class="GfF3rf" style="display:none" jsan="7.GfF3rf"></div> </td> <td aria-label="8:30AM to 4PM" role="text" jstcache="189" class="mxowUb"> <ul jstcache="190"><li jstcache="191" jsinstance="*0" class="G8aQO" jsan="7.G8aQO">8:30AM–4PM</li></ul> <div jstcache="192" class="GfF3rf" style="display:none"> <span jstcache="193" class="rYsDIf" style="display:none">Holiday hours</span> <span jstcache="194" class="zdqHHd" style="display:none">Hours might differ</span> </div> </td> <td jstcache="195" class="HuudEc" jsan="7.HuudEc,t-e_-rMwTIYXc"> <button data-hide-tooltip-on-mouse-move="true" data-value="Wednesday, 8:30AM–4PM" jsaction="pane.openhours.112.copy;;focus:pane.focusTooltip;blur:pane.blurTooltip" data-tooltip="Copy open hours" aria-label="Wednesday, 8:30AM to 4PM, Copy open hours" jstcache="199" class="mWUh3d"> <div class="GYnni"></div> </button> </td> </tr> </tbody></table> <div class="onOnO"><div jstcache="708" data-js-log-root=""><a jstcache="207" class="" style="display:none"></a><button jsaction="pane.wfvdle8" jstcache="207" aria-label="Suggest an edit to open hours" class="M77dve" jsan="0.jsaction,t-2SHeYgY-FgM,7.M77dve,0.aria-label,t-xkpU8JryYnk"><span jstcache="209" class="BgrMEd cYlvTc VOgY4" jsan="7.BgrMEd,7.cYlvTc,7.VOgY4"><img jstcache="210" style="display:none"><span jstcache="211" class="wNNZR fontTitleSmall" jsan="7.wNNZR,7.fontTitleSmall">Suggest new hours</span></span></button></div></div> </div> </div> <div class="z6qSc GUrTXd"> <div> <div jstcache="163"></div> <div class="uLQcoc"></div> </div> </div> </div><div jstcache="696" class="RcCsl fVHpi w4vB1d NOE9ve M0S7ae AG25L" jsan="t-dsyYLk_X_CA,7.RcCsl,7.fVHpi,7.w4vB1d,7.NOE9ve,7.M0S7ae,7.AG25L" data-js-log-root=""><button jstcache="144" aria-haspopup="true" class="CsEnBe" style="display:none" jsan="t-N9b393LKKI4,7.CsEnBe,0.aria-haspopup"></button><a jsaction="pane.wfvdle9;clickmod:pane.wfvdle9;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="144" aria-label="Website: felleskatalogen.no " data-item-id="authority" data-tooltip="Open website" jslog="3443;track:click;metadata:W251bGwsIixBT3ZWYXcyZ3ZEdURoSXB2aVJScjczWDNfQ3RxLCwwYWhVS0V3ald6TVc4eXVmNEFoVzlWZkVESFdzTENLWVE2MWdJRkNnTywiXQ==;mutable:true" href="https://www.felleskatalogen.no/medisin" class="CsEnBe" jsan="8.href,0.jsaction,t-N9b393LKKI4,7.CsEnBe,0.aria-label,0.data-item-id,0.data-tooltip,0.jslog,t-a_Ta5Q7Zj50"><div jstcache="151" class="AeaXub"> <div jstcache="135" class="cXHGnc" jsan="7.cXHGnc,t-DLjTl110KM4"> <div jstcache="142" class="Eottgc" jsan="7.Eottgc"> <img alt="" jstcache="143" src="//www.gstatic.com/images/icons/material/system_gm/2x/public_gm_blue_24dp.png" class="Liguzb" jsan="7.Liguzb,0.alt,8.src"> </div> </div> <div jstcache="136" class="rogA2c ITvuef" jsan="7.rogA2c,7.ITvuef"> <div jstcache="137" class="Io6YTe fontBodyMedium" jsan="7.Io6YTe,7.fontBodyMedium">felleskatalogen.no</div> <div jstcache="138" style="display:none"></div> <div jstcache="139" style="display:none"></div> <div jstcache="140" class="gSkmPd fontBodySmall CuiGbf" jsan="7.gSkmPd,7.fontBodySmall,7.CuiGbf"> </div> </div> </div><div jstcache="152" style="display:none"></div></a><div jstcache="131" style="display:none"></div><div jstcache="132" class="UCw5gc" jsan="t-m1j8Y6BxAJ8,7.UCw5gc"> <div jstcache="149" class="C9yzub"><div jstcache="706" class="etWJQ kdfrQc" jsan="t-WC_3NrOh6j8,7.etWJQ,7.kdfrQc" data-js-log-root=""><button jstcache="120" role="tab" tabindex="-1" class="S9kvJb aUoQJc" style="display:none" jsan="t-diObG01SZ98,7.S9kvJb,7.aUoQJc,0.role,0.tabindex"></button><a jsaction="pane.wfvdle10;keydown:pane.wfvdle10;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="120" aria-label="Open website" data-tooltip="Open website" data-value="Open website" href="https://www.felleskatalogen.no/medisin" class="lcr4fd S9kvJb" jsan="7.lcr4fd,8.href,0.jsaction,t-diObG01SZ98,7.S9kvJb,0.aria-label,0.data-tooltip,0.data-value,t-AbjrQ4n89-4"><span jstcache="122" class="DVeyrd LCTIRd" jsan="7.DVeyrd,7.LCTIRd"><img alt="Open website" draggable="false" jstcache="123" src="//www.gstatic.com/images/icons/material/system_gm/2x/launch_gm_grey_18dp.png" class="EgL07d" jsan="7.EgL07d,0.alt,8.src,0.draggable"><span jstcache="124" style="display:none"></span></span><div jstcache="125" style="display:none"></div><div jstcache="126" style="display:none"></div></a></div><div jstcache="706" class="etWJQ kdfrQc" jsan="t-WC_3NrOh6j8,7.etWJQ,7.kdfrQc" data-js-log-root=""><button jsaction="pane.wfvdle11;keydown:pane.wfvdle11;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="120" aria-label="Copy website" data-tooltip="Copy website" data-value="Copy website" class="S9kvJb" jsan="0.jsaction,t-diObG01SZ98,7.S9kvJb,0.aria-label,0.data-tooltip,0.data-value,t-AbjrQ4n89-4"><span jstcache="122" class="DVeyrd LCTIRd" jsan="7.DVeyrd,7.LCTIRd"><img alt="Copy website" draggable="false" jstcache="123" src="//www.gstatic.com/images/icons/material/system_gm/2x/content_copy_gm_grey_18dp.png" class="EgL07d" jsan="7.EgL07d,0.alt,8.src,0.draggable"><span jstcache="124" style="display:none"></span></span><div jstcache="125" style="display:none"></div><div jstcache="126" style="display:none"></div></button><a jstcache="120" role="tab" tabindex="-1" class="S9kvJb aUoQJc" style="display:none" jsan="t-diObG01SZ98,7.S9kvJb,7.aUoQJc,0.role,0.tabindex"></a></div></div> </div><div jstcache="133" style="display:none"></div></div><div jstcache="696" class="RcCsl fVHpi w4vB1d NOE9ve M0S7ae AG25L" jsan="t-dsyYLk_X_CA,7.RcCsl,7.fVHpi,7.w4vB1d,7.NOE9ve,7.M0S7ae,7.AG25L" data-js-log-root=""><button jsaction="pane.wfvdle12;clickmod:pane.wfvdle12;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="144" aria-label="Phone: 23 16 15 50 " data-item-id="phone:tel:23161550" data-tooltip="Copy phone number" jslog="18491;track:click;metadata:WyIwYWhVS0V3ald6TVc4eXVmNEFoVzlWZkVESFdzTENLWVFfZG9CQ0JFb0RBIl0=;mutable:true" class="CsEnBe" jsan="0.jsaction,t-N9b393LKKI4,7.CsEnBe,0.aria-label,0.data-item-id,0.data-tooltip,0.jslog,t--fmfwOkA_6s"><div jstcache="146" class="AeaXub"> <div jstcache="135" class="cXHGnc" jsan="7.cXHGnc,t-DLjTl110KM4"> <div jstcache="142" class="Eottgc" jsan="7.Eottgc"> <img alt="" jstcache="143" src="//www.gstatic.com/images/icons/material/system_gm/2x/phone_gm_blue_24dp.png" class="Liguzb" jsan="7.Liguzb,0.alt,8.src"> </div> </div> <div jstcache="136" class="rogA2c" jsan="7.rogA2c"> <div jstcache="137" class="Io6YTe fontBodyMedium" jsan="7.Io6YTe,7.fontBodyMedium">23 16 15 50</div> <div jstcache="138" style="display:none"></div> <div jstcache="139" style="display:none"></div> <div jstcache="140" class="gSkmPd fontBodySmall CuiGbf" jsan="7.gSkmPd,7.fontBodySmall,7.CuiGbf"> </div> </div> </div><div jstcache="147" style="display:none"></div></button><a jstcache="144" aria-haspopup="true" class="CsEnBe" style="display:none" jsan="t-N9b393LKKI4,7.CsEnBe,0.aria-haspopup"></a><div jstcache="131" style="display:none"></div><div jstcache="132" class="UCw5gc" jsan="t-m1j8Y6BxAJ8,7.UCw5gc"> <div jstcache="149" class="C9yzub"><div jstcache="706" class="etWJQ kdfrQc" jsan="t-WC_3NrOh6j8,7.etWJQ,7.kdfrQc" data-js-log-root=""><button jsaction="pane.wfvdle13;keydown:pane.wfvdle13;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="120" aria-label="Copy phone number" data-tooltip="Copy phone number" data-value="Copy phone number" class="S9kvJb" jsan="0.jsaction,t-diObG01SZ98,7.S9kvJb,0.aria-label,0.data-tooltip,0.data-value,t-AbjrQ4n89-4"><span jstcache="122" class="DVeyrd LCTIRd" jsan="7.DVeyrd,7.LCTIRd"><img alt="Copy phone number" draggable="false" jstcache="123" src="//www.gstatic.com/images/icons/material/system_gm/2x/content_copy_gm_grey_18dp.png" class="EgL07d" jsan="7.EgL07d,0.alt,8.src,0.draggable"><span jstcache="124" style="display:none"></span></span><div jstcache="125" style="display:none"></div><div jstcache="126" style="display:none"></div></button><a jstcache="120" role="tab" tabindex="-1" class="S9kvJb aUoQJc" style="display:none" jsan="t-diObG01SZ98,7.S9kvJb,7.aUoQJc,0.role,0.tabindex"></a></div><div jstcache="706" class="etWJQ kdfrQc" jsan="t-WC_3NrOh6j8,7.etWJQ,7.kdfrQc" data-js-log-root=""><button jstcache="120" role="tab" tabindex="-1" class="S9kvJb aUoQJc" style="display:none" jsan="t-diObG01SZ98,7.S9kvJb,7.aUoQJc,0.role,0.tabindex"></button><a jsaction="pane.wfvdle14;keydown:pane.wfvdle14;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="120" aria-label="Call phone number" data-tooltip="Call phone number" data-value="Call phone number" href="tel:23161550" class="lcr4fd S9kvJb" jsan="7.lcr4fd,8.href,0.jsaction,t-diObG01SZ98,7.S9kvJb,0.aria-label,0.data-tooltip,0.data-value,t-AbjrQ4n89-4"><span jstcache="122" class="DVeyrd LCTIRd" jsan="7.DVeyrd,7.LCTIRd"><img alt="Call phone number" draggable="false" jstcache="123" src="//www.gstatic.com/images/icons/material/system_gm/2x/phone_gm_grey_18dp.png" class="EgL07d" jsan="7.EgL07d,0.alt,8.src,0.draggable"><span jstcache="124" style="display:none"></span></span><div jstcache="125" style="display:none"></div><div jstcache="126" style="display:none"></div></a></div></div> </div><div jstcache="133" style="display:none"></div></div><div jstcache="696" class="RcCsl fVHpi w4vB1d NOE9ve M0S7ae AG25L" jsan="t-dsyYLk_X_CA,7.RcCsl,7.fVHpi,7.w4vB1d,7.NOE9ve,7.M0S7ae,7.AG25L" data-js-log-root=""><button jsaction="pane.wfvdle15;clickmod:pane.wfvdle15;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="144" aria-label="Plus code: WPH5+FX Oslo" data-item-id="oloc" data-tooltip="Copy plus code" jslog="27644;track:click;mutable:true" class="CsEnBe" jsan="0.jsaction,t-N9b393LKKI4,7.CsEnBe,0.aria-label,0.data-item-id,0.data-tooltip,0.jslog,t--fmfwOkA_6s"><div jstcache="146" class="AeaXub"> <div jstcache="135" class="cXHGnc" jsan="7.cXHGnc,t-DLjTl110KM4"> <div jstcache="142" class="Eottgc" jsan="7.Eottgc"> <img alt="" jstcache="143" src="//maps.gstatic.com/mapfiles/maps_lite/images/2x/ic_plus_code.png" class="Liguzb" jsan="7.Liguzb,0.alt,8.src"> </div> </div> <div jstcache="136" class="rogA2c" jsan="7.rogA2c"> <div jstcache="137" class="Io6YTe fontBodyMedium" jsan="7.Io6YTe,7.fontBodyMedium">WPH5+FX Oslo</div> <div jstcache="138" style="display:none"></div> <div jstcache="139" style="display:none"></div> <div jstcache="140" class="gSkmPd fontBodySmall CuiGbf" jsan="7.gSkmPd,7.fontBodySmall,7.CuiGbf"> </div> </div> </div><div jstcache="147" style="display:none"></div></button><a jstcache="144" aria-haspopup="true" class="CsEnBe" style="display:none" jsan="t-N9b393LKKI4,7.CsEnBe,0.aria-haspopup"></a><div jstcache="131" style="display:none"></div><div jstcache="132" class="UCw5gc" jsan="t-m1j8Y6BxAJ8,7.UCw5gc"> <div jstcache="149" class="C9yzub"><div jstcache="706" class="etWJQ kdfrQc" jsan="t-WC_3NrOh6j8,7.etWJQ,7.kdfrQc" data-js-log-root=""><button jsaction="pane.wfvdle16;keydown:pane.wfvdle16;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="120" aria-label="Copy plus code" data-tooltip="Copy plus code" data-value="Copy plus code" class="S9kvJb" jsan="0.jsaction,t-diObG01SZ98,7.S9kvJb,0.aria-label,0.data-tooltip,0.data-value,t-AbjrQ4n89-4"><span jstcache="122" class="DVeyrd LCTIRd" jsan="7.DVeyrd,7.LCTIRd"><img alt="Copy plus code" draggable="false" jstcache="123" src="//www.gstatic.com/images/icons/material/system_gm/2x/content_copy_gm_grey_18dp.png" class="EgL07d" jsan="7.EgL07d,0.alt,8.src,0.draggable"><span jstcache="124" style="display:none"></span></span><div jstcache="125" style="display:none"></div><div jstcache="126" style="display:none"></div></button><a jstcache="120" role="tab" tabindex="-1" class="S9kvJb aUoQJc" style="display:none" jsan="t-diObG01SZ98,7.S9kvJb,7.aUoQJc,0.role,0.tabindex"></a></div><div jstcache="706" class="etWJQ kdfrQc" jsan="t-WC_3NrOh6j8,7.etWJQ,7.kdfrQc" data-js-log-root=""><button jsaction="pane.wfvdle17;keydown:pane.wfvdle17;focus:pane.focusTooltip;blur:pane.blurTooltip" jstcache="120" aria-label="Learn more about plus codes" data-tooltip="Learn more about plus codes" data-value="Learn more about plus codes" class="S9kvJb" jsan="0.jsaction,t-diObG01SZ98,7.S9kvJb,0.aria-label,0.data-tooltip,0.data-value,t-AbjrQ4n89-4"><span jstcache="122" class="DVeyrd LCTIRd" jsan="7.DVeyrd,7.LCTIRd"><img alt="Learn more about plus codes" draggable="false" jstcache="123" src="//www.gstatic.com/images/icons/material/system_gm/2x/info_outline_gm_grey_18dp.png" class="EgL07d" jsan="7.EgL07d,0.alt,8.src,0.draggable"><span jstcache="124" style="display:none"></span></span><div jstcache="125" style="display:none"></div><div jstcache="126" style="display:none"></div></button><a jstcache="120" role="tab" tabindex="-1" class="S9kvJb aUoQJc" style="display:none" jsan="t-diObG01SZ98,7.S9kvJb,7.aUoQJc,0.role,0.tabindex"></a></div></div> </div><div jstcache="133" style="display:none"></div></div><div jstcache="696" class="RcCsl fVHpi w4vB1d NOE9ve M0S7ae AG25L" jsan="t-dsyYLk_X_CA,7.RcCsl,7.fVHpi,7.w4vB1d,7.NOE9ve,7.M0S7ae,7.AG25L" data-js-log-root=""><button jsaction="pane.wfvdle18;clickmod:pane.wfvdle18" jstcache="144" aria-label="Send Felleskatalogen AS to your phone" data-item-id="send-to-device" jslog="141697;track:click;mutable:true" class="CsEnBe" jsan="0.jsaction,t-N9b393LKKI4,7.CsEnBe,0.aria-label,0.data-item-id,0.jslog,t--fmfwOkA_6s"><div jstcache="146" class="AeaXub"> <div jstcache="135" class="cXHGnc" jsan="7.cXHGnc,t-DLjTl110KM4"> <div jstcache="142" class="Eottgc" jsan="7.Eottgc"> <img alt="" jstcache="143" src="//maps.gstatic.com/consumer/images/icons/2x/send_to_mobile_alt_gm_blue_24dp.png" class="Liguzb" jsan="7.Liguzb,0.alt,8.src"> </div> </div> <div jstcache="136" class="rogA2c" jsan="7.rogA2c"> <div jstcache="137" class="Io6YTe fontBodyMedium" jsan="7.Io6YTe,7.fontBodyMedium">Send to your phone</div> <div jstcache="138" style="display:none"></div> <div jstcache="139" style="display:none"></div> <div jstcache="140" class="gSkmPd fontBodySmall CuiGbf" jsan="7.gSkmPd,7.fontBodySmall,7.CuiGbf"> </div> </div> </div><div jstcache="147" style="display:none"></div></button><a jstcache="144" aria-haspopup="true" class="CsEnBe" style="display:none" jsan="t-N9b393LKKI4,7.CsEnBe,0.aria-haspopup"></a><div jstcache="131" style="display:none"></div><div jstcache="132" class="UCw5gc" jsan="t-m1j8Y6BxAJ8,7.UCw5gc"> <div jstcache="149" class="C9yzub"></div> </div><div jstcache="133" style="display:none"></div></div><div jstcache="696" class="RcCsl fVHpi w4vB1d NOE9ve M0S7ae AG25L" jsan="t-dsyYLk_X_CA,7.RcCsl,7.fVHpi,7.w4vB1d,7.NOE9ve,7.M0S7ae,7.AG25L" data-js-log-root=""><button jstcache="144" class="" style="display:none"></button><a jsaction="pane.wfvdle19;clickmod:pane.wfvdle19" jstcache="144" aria-label="Claim this business" data-item-id="merchant" jslog="17658;track:click;metadata:WyIwYWhVS0V3ald6TVc4eXVmNEFoVzlWZkVESFdzTENLWVFfMWtJS0NnVSJd;mutable:true" href="https://business.google.com/create?fp=17692242508345267479&amp;hl=en&amp;authuser=0&amp;gmbsrc=no-en-et-ip-z-gmb-s-z-l~mrc%7Cclaimbz%7Cu&amp;ppsrc=GMBMI&amp;utm_campaign=no-en-et-ip-z-gmb-s-z-l~mrc%7Cclaimbz%7Cu&amp;utm_source=gmb_mrc81&amp;utm_medium=et&amp;getstarted&amp;lis=1" class="CsEnBe" jsan="8.href,0.jsaction,t-N9b393LKKI4,7.CsEnBe,0.aria-label,0.data-item-id,0.jslog,t-a_Ta5Q7Zj50"><div jstcache="151" class="AeaXub"> <div jstcache="135" class="cXHGnc" jsan="7.cXHGnc,t-DLjTl110KM4"> <div jstcache="142" class="Eottgc" jsan="7.Eottgc"> <img alt="" jstcache="143" src="//www.gstatic.com/images/icons/material/system_gm/2x/verified_user_gm_blue_24dp.png" class="Liguzb" jsan="7.Liguzb,0.alt,8.src"> </div> </div> <div jstcache="136" class="rogA2c" jsan="7.rogA2c"> <div jstcache="137" class="Io6YTe fontBodyMedium" jsan="7.Io6YTe,7.fontBodyMedium">Claim this business</div> <div jstcache="138" style="display:none"></div> <div jstcache="139" style="display:none"></div> <div jstcache="140" class="gSkmPd fontBodySmall CuiGbf" jsan="7.gSkmPd,7.fontBodySmall,7.CuiGbf"> </div> </div> </div><div jstcache="152" style="display:none"></div></a><div jstcache="131" style="display:none"></div><div jstcache="132" class="UCw5gc" jsan="t-m1j8Y6BxAJ8,7.UCw5gc"> <div jstcache="149" class="C9yzub"></div> </div><div jstcache="133" style="display:none"></div></div></div>

# xpath
# //*[@id="QA0Szd"]/div/div/div[1]/div[2]/div/div[1]/div/div/div[7]/div[9]
# //*[@id="QA0Szd"]/div/div/div[1]/div[2]/div/div[1]/div/div/div[7]


# js path
# document.querySelector("#QA0Szd > div > div > div.w6VYqd > div.bJzME.tTVLSc > div > div.e07Vkf.kA9KIf > div > div > div:nth-child(7) > div:nth-child(9)")
# document.querySelector("#QA0Szd > div > div > div.w6VYqd > div.bJzME.tTVLSc > div > div.e07Vkf.kA9KIf > div > div > div:nth-child(7)")
def get_charts(doc2):    
    script = doc2.find_all('script', type='text/javascript')
    parsed = js2xml.parse(script[7].text)
    data = [d.xpath(".//array/number/@value") for d in parsed.xpath("//property[@name='data']")]
    categories = parsed.xpath("//property[@name='categories']//string/text()")
    output =  list(zip(repeat(categories), data))
    titles = ['weekly followers change','weekly following change','weekly uploads change',
              'total followers (weekly)', 'total following (weekly)', 'total uploads (weekly)',
              'total followers (monthly)','total following (monthly)','total uploads (monthly)',]
    charts = []
    for i,title in zip(output,titles):
        data = i[1]
        date = data[0::2]
        value = data[1::2]
        date = [float(i) for i in date]
        df = (pd.DataFrame([date, value], index = [ 'date', title])).T
        df['date'] = pd.to_datetime(df['date'].mul(1e6).apply(pd.Timestamp)).dt.strftime('%Y-%m-%d')
        charts.append(df)
    return charts
